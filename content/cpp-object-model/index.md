---
title: "C++ 对象模型"
description: "在 C++ 基础之上，系统理解 class/struct、继承、多态与虚函数表，让你敢于在实际项目中设计清晰的接口层次。"
order: 1
---

这个专栏假设你已经读完「C++ 基础」专栏，能够用 C++ 的类、RAII 和命名空间写出小型程序。现在我们从另一个角度来回答一个问题：

> C++ 里的“对象”到底长什么样？
>
> 继承、多态、虚函数这些特性，在内存和调用层面究竟做了什么？

我们不会去做 ABI 级别的实现考古，而是以**设计决策**为主线，在刚好足够的实现细节上建立心智模型。

---

## 第一部分：对象与类的布局

- [ ] **对象与成员：C++ 对象在内存中长什么样？** (🚧 计划中)
    - 从简单的 `struct` 与 `class` 出发，直观理解成员变量的布局、`this` 指针的含义，以及为什么对象大小和成员排列顺序有关。

---

## 第二部分：接口类与继承层次

- [ ] **接口类与继承：从函数指针回调到虚函数** (🚧 计划中)
    - 对比 C 风格的“函数指针回调/策略表”和 C++ 的接口类（纯虚类），说明什么时候需要继承，什么时候应该用组合；在这个过程中引入 `virtual`、纯虚函数、`override`、虚析构等语法，并解释它们各自解决什么实际问题。

---

## 第三部分：虚函数表与动态多态

- [ ] **虚函数表与调用流程：从调用点到 vtable** (🚧 计划中)
    - 以 `Base* p = new Derived; p->foo();` 为例，构建一幅简化的对象布局与 vtable 心智图，解释虚函数调用的编译期/运行期分工；顺带讨论对象切片、为何多态通常通过指针/引用来使用，以及 `final`/`override` 在接口演化中的作用。

---

## 第四部分：多态的边界与替代方案

- [ ] **运行时多态 vs 模板多态：该选哪一种？** (🚧 计划中)
    - 用一个具体的小例子（如日志后端或渲染后端）对比“虚函数接口类 + 指针”和“模板参数 + 泛型编程”的两种写法，从可扩展性、二进制边界、性能和编译时间等维度分析取舍，并为「Modern C++」专栏中的更高级技巧埋下伏笔。

---

> **读完本专栏后**，你应该能：
>
> - 画出 C++ 对象的大致内存布局心智图，而不必记住所有实现细节；
> - 清楚地知道什么时候该用继承与虚函数，什么时候应优先考虑组合或模板；
> - 在团队代码评审中，用“对象模型”的语言讨论接口设计，而不仅仅是语法对错。
