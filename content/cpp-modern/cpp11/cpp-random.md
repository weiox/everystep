---
title: '随机数库 <random>：别再用 rand()'
description: 'C++11 的 <random> 把“随机”拆成引擎和分布：mt19937 + uniform_int_distribution 让你既可复现也更靠谱。'
---

老 C++ 代码里。

`rand()` 出镜率很高。

它也确实方便。

但它的问题也很老。

质量不可控。

范围很小。

全局状态。

线程不友好。

而且你想要不同分布。

还得自己取模。

那更容易出偏差。

C++11 的 `<random>`。

把随机数做成了一个更像工程的系统。

它拆成两部分。

引擎。

分布。

## 引擎：负责产生“原始随机比特”

最常用的一个。

`std::mt19937`。

```cpp
#include <random>

std::mt19937 rng(123);
```

seed 固定。

结果就可复现。

这对测试很重要。

对调试也很重要。

## 分布：负责把比特变成你想要的形状

你想要 [1, 6] 的骰子。

别用 `% 6`。

用分布。

```cpp
std::uniform_int_distribution<int> dist(1, 6);
int x = dist(rng);
```

你想要 [0.0, 1.0) 的均匀浮点。

```cpp
std::uniform_real_distribution<double> ud(0.0, 1.0);
double y = ud(rng);
```

这写法比 rand() 复杂一点。

但它把意图写得很清楚。

## 小洞见

<random> 的风格很 C++11。

不再给你一个“万能函数”。

而是给你一套组件。

你可以控制。

可以复现。

可以组合。

你写出来的随机。

不再靠运气。

而是靠你明确选择的引擎和分布。

这对工程来说。

比“看起来随机”重要得多。
